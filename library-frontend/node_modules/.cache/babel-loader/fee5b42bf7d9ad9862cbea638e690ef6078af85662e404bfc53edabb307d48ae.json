{"ast":null,"code":"import React,{useState}from'react';import axiosConfig from'../utilities/axiosConfig';// Adjust the import based on your axios setup\n// Import your Book interface\nimport{getAuthHeader}from'../utilities/ApiUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddBook=()=>{const[book,setBook]=useState({id:0,// You can set this to 0 since it's not needed for a new book\ntitle:'',author:'',imageUrl:'',description:'',publisher:'',publicationDate:new Date(),category:'',isbn:'',pageCount:0,isAvailable:true,checkedOutDate:undefined,returnDate:undefined});const[error,setError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);const handleChange=e=>{const{name,value}=e.target;// Handle the date input separately\nif(name==='publicationDate'){setBook({...book,publicationDate:new Date(value)});}else{setBook({...book,[name]:value});}};const handleSubmit=async e=>{e.preventDefault();setError(null);setSuccessMessage(null);try{const config=getAuthHeader();// Sending POST request to the API\nawait axiosConfig.post('/api/books',book,config);console.log('Book object to be sent:',book);setSuccessMessage('Book added successfully!');setBook({id:0,title:'',author:'',imageUrl:'',description:'',publisher:'',publicationDate:new Date(),category:'',isbn:'',pageCount:0,isAvailable:true,checkedOutDate:undefined,returnDate:undefined});}catch(error){setError('Failed to add book. Please try again.');console.error('Error adding book:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Book\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:book.title,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Author:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",value:book.author,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:book.category,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Genre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fiction\",children:\"Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Non-Fiction\",children:\"Non-Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Science Fiction\",children:\"Science Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fantasy\",children:\"Fantasy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mystery\",children:\"Mystery\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Biography\",children:\"Biography\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Romance\",children:\"Romance\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image URL:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"imageUrl\",value:book.imageUrl,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:book.description,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Publisher:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"publisher\",value:book.publisher,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Publication Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"publicationDate\",value:book.publicationDate.toISOString().split('T')[0],onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"ISBN:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"isbn\",value:book.isbn,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Page Count:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"pageCount\",value:book.pageCount,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Is Available:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"isAvailable\",checked:book.isAvailable,onChange:e=>setBook({...book,isAvailable:e.target.checked})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Book\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),successMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:successMessage})]});};export default AddBook;","map":{"version":3,"names":["React","useState","axiosConfig","getAuthHeader","jsx","_jsx","jsxs","_jsxs","AddBook","book","setBook","id","title","author","imageUrl","description","publisher","publicationDate","Date","category","isbn","pageCount","isAvailable","checkedOutDate","undefined","returnDate","error","setError","successMessage","setSuccessMessage","handleChange","e","name","value","target","handleSubmit","preventDefault","config","post","console","log","children","onSubmit","type","onChange","required","toISOString","split","checked","style","color"],"sources":["/Users/richarddrum/TroyWebTechnicalAssessment/Library/library-frontend/src/components/AddBook.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axiosConfig from '../utilities/axiosConfig'; // Adjust the import based on your axios setup\nimport { Book } from '../types/Book'; // Import your Book interface\nimport { getAuthHeader } from '../utilities/ApiUtils';\n\nconst AddBook: React.FC = () => {\n    const [book, setBook] = useState<Book>({\n        id: 0, // You can set this to 0 since it's not needed for a new book\n        title: '',\n        author: '',\n        imageUrl: '',\n        description: '',\n        publisher: '',\n        publicationDate: new Date(),\n        category: '',\n        isbn: '',\n        pageCount: 0,\n        isAvailable: true,\n        checkedOutDate: undefined,\n        returnDate: undefined,\n    });\n\n    const [error, setError] = useState<string | null>(null);\n    const [successMessage, setSuccessMessage] = useState<string | null>(null);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n\n        // Handle the date input separately\n        if (name === 'publicationDate') {\n            setBook({ ...book, publicationDate: new Date(value) });\n        } else {\n            setBook({ ...book, [name]: value });\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setError(null);\n        setSuccessMessage(null);\n\n        try {\n            const config = getAuthHeader(); \n\n            // Sending POST request to the API\n            await axiosConfig.post('/api/books', book, config);\n            console.log('Book object to be sent:', book);\n            setSuccessMessage('Book added successfully!');\n            setBook({\n                id: 0,\n                title: '',\n                author: '',\n                imageUrl: '',\n                description: '',\n                publisher: '',\n                publicationDate: new Date(),\n                category: '',\n                isbn: '',\n                pageCount: 0,\n                isAvailable: true,\n                checkedOutDate: undefined,\n                returnDate: undefined,\n            });\n        } catch (error) {\n            setError('Failed to add book. Please try again.');\n            console.error('Error adding book:', error);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Add Book</h2>\n            <form onSubmit={handleSubmit}>\n                <div>\n                    <label>Title:</label>\n                    <input type=\"text\" name=\"title\" value={book.title} onChange={handleChange} required />\n                </div>\n                <div>\n                    <label>Author:</label>\n                    <input type=\"text\" name=\"author\" value={book.author} onChange={handleChange} required />\n                </div>\n                <div>\n                    <label>Category:</label>\n                    <select name=\"category\" value={book.category} onChange={handleChange} required>\n                        <option value=\"\">Select Genre</option>\n                        <option value=\"Fiction\">Fiction</option>\n                        <option value=\"Non-Fiction\">Non-Fiction</option>\n                        <option value=\"Science Fiction\">Science Fiction</option>\n                        <option value=\"Fantasy\">Fantasy</option>\n                        <option value=\"Mystery\">Mystery</option>\n                        <option value=\"Biography\">Biography</option>\n                        <option value=\"Romance\">Romance</option>\n                        {/* Add more options as needed */}\n                    </select>\n                </div>\n                <div>\n                    <label>Image URL:</label>\n                    <input type=\"text\" name=\"imageUrl\" value={book.imageUrl} onChange={handleChange} />\n                </div>\n                <div>\n                    <label>Description:</label>\n                    <textarea name=\"description\" value={book.description} onChange={handleChange} />\n                </div>\n                <div>\n                    <label>Publisher:</label>\n                    <input type=\"text\" name=\"publisher\" value={book.publisher} onChange={handleChange} required />\n                </div>\n                <div>\n                    <label>Publication Date:</label>\n                    <input type=\"date\" name=\"publicationDate\" value={book.publicationDate.toISOString().split('T')[0]} onChange={handleChange} required />\n                </div>\n                <div>\n                    <label>ISBN:</label>\n                    <input type=\"text\" name=\"isbn\" value={book.isbn} onChange={handleChange} required />\n                </div>\n                <div>\n                    <label>Page Count:</label>\n                    <input type=\"number\" name=\"pageCount\" value={book.pageCount} onChange={handleChange} required />\n                </div>\n                <div>\n                    <label>Is Available:</label>\n                    <input type=\"checkbox\" name=\"isAvailable\" checked={book.isAvailable} onChange={(e) => setBook({ ...book, isAvailable: e.target.checked })} />\n                </div>\n                <button type=\"submit\">Add Book</button>\n            </form>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            {successMessage && <p style={{ color: 'green' }}>{successMessage}</p>}\n        </div>\n    );\n};\n\nexport default AddBook;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}