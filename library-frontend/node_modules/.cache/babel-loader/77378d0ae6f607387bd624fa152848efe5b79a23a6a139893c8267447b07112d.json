{"ast":null,"code":"// src/Home.tsx\nimport React,{useEffect}from'react';import{Link}from'react-router-dom';import{useNavigate}from'react-router-dom';import LogoutBanner from'./Logout';import{jwtDecode}from'jwt-decode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const navigate=useNavigate();const token=localStorage.getItem('token');const isTokenValid=token=>{if(!token)return false;try{const decoded=jwtDecode(token);// Decode the JWT\nconst currentTime=Date.now()/1000;// Current time in seconds TODO fix\nreturn decoded.exp>currentTime;// Check if the token is expired\n}catch(error){console.error(\"Token validation error:\",error);return false;}};const handleLogout=()=>{// Clear any stored user data (e.g., token)\nlocalStorage.removeItem('token');// Redirect to login page or wherever you want\nnavigate('/login');};const tokenIsValid=isTokenValid(token);// If token is not valid, redirect to login\nuseEffect(()=>{// Redirect if token is not valid\nif(!isTokenValid(token)){navigate('/login');}},[token,navigate]);return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px'},children:[tokenIsValid&&/*#__PURE__*/_jsx(LogoutBanner,{onLogout:handleLogout}),/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to the Book Store\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your one-stop destination for exploring and borrowing books!\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{style:{marginRight:'10px'},children:\"Login\"})}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Sign Up\"})})]})]});};// Define styles with correct type\nconst styles={container:{textAlign:'center',padding:'50px'},nav:{marginTop:'20px'},menu:{listStyleType:'none',padding:0},menuItem:{margin:'10px 0'},link:{textDecoration:'none',color:'#007BFF',fontSize:'20px'}};export default Home;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","LogoutBanner","jwtDecode","jsx","_jsx","jsxs","_jsxs","Home","navigate","token","localStorage","getItem","isTokenValid","decoded","currentTime","Date","now","exp","error","console","handleLogout","removeItem","tokenIsValid","style","textAlign","padding","children","onLogout","marginTop","to","marginRight","styles","container","nav","menu","listStyleType","menuItem","margin","link","textDecoration","color","fontSize"],"sources":["/Users/richarddrum/TroyWebTechnicalAssessment/Library/library-frontend/src/components/Home.tsx"],"sourcesContent":["// src/Home.tsx\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport LogoutBanner from './Logout';\nimport { jwtDecode } from 'jwt-decode';\n\nconst Home: React.FC = () => {\n    const navigate = useNavigate();\n    const token = localStorage.getItem('token');\n\n    const isTokenValid = (token: string | null) => {\n        if (!token) return false;\n\n        try {\n            const decoded: any = jwtDecode(token); // Decode the JWT\n            const currentTime = Date.now() / 1000; // Current time in seconds TODO fix\n            return decoded.exp > currentTime; // Check if the token is expired\n        } catch (error) {\n            console.error(\"Token validation error:\", error);\n            return false;\n        }\n    };\n\n    const handleLogout = () => {\n        // Clear any stored user data (e.g., token)\n        localStorage.removeItem('token');\n        // Redirect to login page or wherever you want\n        navigate('/login');\n    };\n\n    const tokenIsValid = isTokenValid(token);\n    // If token is not valid, redirect to login\n    useEffect(() => {\n        // Redirect if token is not valid\n        if (!isTokenValid(token)) {\n            navigate('/login');\n        }\n    }, [token, navigate]); \n\n    return (\n        <div style={{ textAlign: 'center', padding: '20px' }}>\n            {tokenIsValid && <LogoutBanner onLogout={handleLogout} />}\n            \n            <h1>Welcome to the Book Store</h1>\n            <p>Your one-stop destination for exploring and borrowing books!</p>\n            <div style={{ marginTop: '20px' }}>\n                <Link to=\"/login\">\n                    <button style={{ marginRight: '10px' }}>Login</button>\n                </Link>\n                <Link to=\"/signup\">\n                    <button>Sign Up</button>\n                </Link>\n            </div>\n        </div>\n    );\n};\n\n// Define styles with correct type\nconst styles: { [key: string]: React.CSSProperties } = {\n    container: {\n        textAlign: 'center',\n        padding: '50px',\n    },\n    nav: {\n        marginTop: '20px',\n    },\n    menu: {\n        listStyleType: 'none',\n        padding: 0,\n    },\n    menuItem: {\n        margin: '10px 0',\n    },\n    link: {\n        textDecoration: 'none',\n        color: '#007BFF',\n        fontSize: '20px',\n    }\n};\n\nexport default Home;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,YAAY,KAAM,UAAU,CACnC,OAASC,SAAS,KAAQ,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,IAAc,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,KAAM,CAAAC,YAAY,CAAIH,KAAoB,EAAK,CAC3C,GAAI,CAACA,KAAK,CAAE,MAAO,MAAK,CAExB,GAAI,CACA,KAAM,CAAAI,OAAY,CAAGX,SAAS,CAACO,KAAK,CAAC,CAAE;AACvC,KAAM,CAAAK,WAAW,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAE;AACvC,MAAO,CAAAH,OAAO,CAACI,GAAG,CAAGH,WAAW,CAAE;AACtC,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,MAAO,MAAK,CAChB,CACJ,CAAC,CAED,KAAM,CAAAE,YAAY,CAAGA,CAAA,GAAM,CACvB;AACAV,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC,CAChC;AACAb,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAED,KAAM,CAAAc,YAAY,CAAGV,YAAY,CAACH,KAAK,CAAC,CACxC;AACAX,SAAS,CAAC,IAAM,CACZ;AACA,GAAI,CAACc,YAAY,CAACH,KAAK,CAAC,CAAE,CACtBD,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CAAC,CAAE,CAACC,KAAK,CAAED,QAAQ,CAAC,CAAC,CAErB,mBACIF,KAAA,QAAKiB,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,EAChDJ,YAAY,eAAIlB,IAAA,CAACH,YAAY,EAAC0B,QAAQ,CAAEP,YAAa,CAAE,CAAC,cAEzDhB,IAAA,OAAAsB,QAAA,CAAI,2BAAyB,CAAI,CAAC,cAClCtB,IAAA,MAAAsB,QAAA,CAAG,8DAA4D,CAAG,CAAC,cACnEpB,KAAA,QAAKiB,KAAK,CAAE,CAAEK,SAAS,CAAE,MAAO,CAAE,CAAAF,QAAA,eAC9BtB,IAAA,CAACL,IAAI,EAAC8B,EAAE,CAAC,QAAQ,CAAAH,QAAA,cACbtB,IAAA,WAAQmB,KAAK,CAAE,CAAEO,WAAW,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,OAAK,CAAQ,CAAC,CACpD,CAAC,cACPtB,IAAA,CAACL,IAAI,EAAC8B,EAAE,CAAC,SAAS,CAAAH,QAAA,cACdtB,IAAA,WAAAsB,QAAA,CAAQ,SAAO,CAAQ,CAAC,CACtB,CAAC,EACN,CAAC,EACL,CAAC,CAEd,CAAC,CAED;AACA,KAAM,CAAAK,MAA8C,CAAG,CACnDC,SAAS,CAAE,CACPR,SAAS,CAAE,QAAQ,CACnBC,OAAO,CAAE,MACb,CAAC,CACDQ,GAAG,CAAE,CACDL,SAAS,CAAE,MACf,CAAC,CACDM,IAAI,CAAE,CACFC,aAAa,CAAE,MAAM,CACrBV,OAAO,CAAE,CACb,CAAC,CACDW,QAAQ,CAAE,CACNC,MAAM,CAAE,QACZ,CAAC,CACDC,IAAI,CAAE,CACFC,cAAc,CAAE,MAAM,CACtBC,KAAK,CAAE,SAAS,CAChBC,QAAQ,CAAE,MACd,CACJ,CAAC,CAED,cAAe,CAAAlC,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}