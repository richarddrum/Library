{"ast":null,"code":"// src/EditBook.tsx\nimport React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import axiosConfig from'../utilities/axiosConfig';import{getAuthHeader}from'../utilities/ApiUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditBook=()=>{const{id}=useParams();const[book,setBook]=useState(null);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchBook=async()=>{try{const config=getAuthHeader();const response=await axiosConfig.get(`/api/books/${id}`,config);const fetchedBook=response.data;// Convert publicationDate to Date if it's a string\nif(typeof fetchedBook.publicationDate==='string'){fetchedBook.publicationDate=new Date(fetchedBook.publicationDate);}setBook(fetchedBook);}catch(error){console.error('Error fetching book:',error);setError('Failed to fetch book details.');}};fetchBook();},[id]);const handleChange=e=>{const{name,value}=e.target;if(book){// Handle publicationDate conversion from string to Date\nif(name==='publicationDate'){setBook({...book,[name]:new Date(value)});// Convert value to Date\n}else{setBook({...book,[name]:value});}}};const handleSubmit=async e=>{e.preventDefault();if(book){try{const config=getAuthHeader();await axiosConfig.put(`/api/books/${id}`,book,config);console.log(`book id ${id} edited successfully`);navigate('/manage-books');// Navigate back to the book list after editing\n}catch(error){console.error('Error updating book:',error);setError('Failed to update book.');}}};// Conditional rendering\nif(book===null){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show a loading message while fetching\n}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Book\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:book.title,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Author:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",value:book.author,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:book.category,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Genre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fiction\",children:\"Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Non-Fiction\",children:\"Non-Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Science Fiction\",children:\"Science Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fantasy\",children:\"Fantasy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mystery\",children:\"Mystery\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Biography\",children:\"Biography\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Romance\",children:\"Romance\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cover Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"coverImage\",value:book.coverImage,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:book.description,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"ISBN:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"isbn\",value:book.isbn,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Page Count:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"pageCount\",value:book.pageCount,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Publisher:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"publisher\",value:book.publisher,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Publication Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"publicationDate\",value:(book===null||book===void 0?void 0:book.publicationDate.toISOString().split('T')[0])||''// Convert Date to string\n,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Book\"})]});};export default EditBook;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axiosConfig","getAuthHeader","jsx","_jsx","jsxs","_jsxs","EditBook","id","book","setBook","error","setError","navigate","fetchBook","config","response","get","fetchedBook","data","publicationDate","Date","console","handleChange","e","name","value","target","handleSubmit","preventDefault","put","log","children","onSubmit","style","color","type","title","onChange","required","author","category","coverImage","description","isbn","pageCount","publisher","toISOString","split"],"sources":["/Users/richarddrum/TroyWebTechnicalAssessment/Git/Library/library-frontend/src/components/EditBook.tsx"],"sourcesContent":["// src/EditBook.tsx\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axiosConfig from '../utilities/axiosConfig';\nimport { Book } from '../types/Book';\nimport { getAuthHeader } from '../utilities/ApiUtils';\n\nconst EditBook: React.FC = () => {\n    const { id } = useParams<{ id: string }>();\n    const [book, setBook] = useState<Book | null>(null);\n    const [error, setError] = useState<string | null>(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchBook = async () => {\n            try {\n                const config = getAuthHeader();\n                const response = await axiosConfig.get(`/api/books/${id}`, config);\n                const fetchedBook = response.data;\n\n                // Convert publicationDate to Date if it's a string\n                if (typeof fetchedBook.publicationDate === 'string') {\n                    fetchedBook.publicationDate = new Date(fetchedBook.publicationDate);\n                }\n                setBook(fetchedBook);\n            } catch (error) {\n                console.error('Error fetching book:', error);\n                setError('Failed to fetch book details.');\n            }\n        };\n\n        fetchBook();\n    }, [id]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLSelectElement | HTMLInputElement | HTMLTextAreaElement>) => {\n        const { name, value } = e.target;\n        if (book) {\n            // Handle publicationDate conversion from string to Date\n            if (name === 'publicationDate') {\n                setBook({ ...book, [name]: new Date(value) }); // Convert value to Date\n            } else {\n                setBook({ ...book, [name]: value });\n            }\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        if (book) {\n            try {\n                const config = getAuthHeader();\n                await axiosConfig.put(`/api/books/${id}`, book, config);\n                console.log(`book id ${id} edited successfully`);\n                navigate('/manage-books'); // Navigate back to the book list after editing\n            } catch (error) {\n                console.error('Error updating book:', error);\n                setError('Failed to update book.');\n            }\n        }\n    };\n    \n    // Conditional rendering\n    if (book === null) {\n        return <div>Loading...</div>; // Show a loading message while fetching\n    }\n\n    return (\n        <form onSubmit={handleSubmit}>\n            <h2>Edit Book</h2>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            <div>\n                <label>Title:</label>\n                <input type=\"text\" name=\"title\" value={book.title} onChange={handleChange} required />\n            </div>\n            <div>\n                <label>Author:</label>\n                <input type=\"text\" name=\"author\" value={book.author} onChange={handleChange} required />\n            </div>\n            <div>\n                <label>Category:</label>\n                <select name=\"category\" value={book.category} onChange={handleChange} required>\n                    <option value=\"\">Select Genre</option>\n                    <option value=\"Fiction\">Fiction</option>\n                    <option value=\"Non-Fiction\">Non-Fiction</option>\n                    <option value=\"Science Fiction\">Science Fiction</option>\n                    <option value=\"Fantasy\">Fantasy</option>\n                    <option value=\"Mystery\">Mystery</option>\n                    <option value=\"Biography\">Biography</option>\n                    <option value=\"Romance\">Romance</option>\n                </select>\n            </div>\n            <div>\n                <label>Cover Image:</label>\n                <input type=\"text\" name=\"coverImage\" value={book.coverImage} onChange={handleChange} />\n            </div>\n            <div>\n                <label>Description:</label>\n                <textarea name=\"description\" value={book.description} onChange={handleChange} required />\n            </div>\n            <div>\n                <label>ISBN:</label>\n                <input type=\"text\" name=\"isbn\" value={book.isbn} onChange={handleChange} required />\n            </div>\n            <div>\n                <label>Page Count:</label>\n                <input type=\"number\" name=\"pageCount\" value={book.pageCount} onChange={handleChange} required />\n            </div>\n            <div>\n                <label>Publisher:</label>\n                <input type=\"text\" name=\"publisher\" value={book.publisher} onChange={handleChange} required />\n            </div>\n            <div>\n                <label>Publication Date:</label>\n                <input\n                    type=\"date\"\n                    name=\"publicationDate\"\n                    value={book?.publicationDate.toISOString().split('T')[0] || ''} // Convert Date to string\n                    onChange={handleChange}\n                    required\n                />\n            </div>\n            <button type=\"submit\">Update Book</button>\n        </form>\n    );\n};\n\nexport default EditBook;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}