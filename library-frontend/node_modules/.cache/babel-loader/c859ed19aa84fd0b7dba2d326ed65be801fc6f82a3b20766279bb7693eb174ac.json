{"ast":null,"code":"// src/ManageBooks.tsx\nimport React,{useEffect,useState}from'react';import axiosConfig from'./axiosConfig';import BookList from'./BookList';import{getAuthHeader}from'../utilities/ApiUtils';//import { useNavigate } from 'react-router-dom';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageBooks=()=>{const[books,setBooks]=useState([]);const[book,setBook]=useState({id:-1,title:'',author:'',genre:'',imageUrl:''});const[isEditing,setIsEditing]=useState(false);//const navigate = useNavigate();\nuseEffect(()=>{fetchBooks();},[]);const fetchBooks=async()=>{try{const config=getAuthHeader();const response=await axiosConfig.get('/api/books/featured',config);// Fetch books from your API\nsetBooks(response.data);}catch(error){console.error('Error fetching books:',error);// Optionally set an error state here if needed\n}};const handleChange=e=>{const{name,value}=e.target;setBook({...book,[name]:value});};const handleAddOrUpdateBook=async e=>{e.preventDefault();try{const config=getAuthHeader();if(isEditing){await axiosConfig.put(`/api/books/${book.id}`,book,config);// Update existing book\n}else{await axiosConfig.post('/api/books',book,config);// Add new book\n}fetchBooks();resetForm();}catch(error){console.error('Error saving book:',error);}};const handleEdit=book=>{setBook(book);setIsEditing(true);};const handleDelete=async id=>{try{const config=getAuthHeader();await axiosConfig.delete(`/api/books/${id}`,config);// Delete book by ID\nfetchBooks();}catch(error){console.error('Error deleting book:',error);}};const resetForm=()=>{setBook({id:-1,title:'',author:'',genre:'',imageUrl:''});setIsEditing(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Books\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddOrUpdateBook,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:book.title,onChange:handleChange,placeholder:\"Title\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",value:book.author,onChange:handleChange,placeholder:\"Author\",required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"genre\",value:book.genre,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Genre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fiction\",children:\"Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Non-Fiction\",children:\"Non-Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sci-Fi\",children:\"Sci-Fi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Biography\",children:\"Biography\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"imageUrl\",value:book.imageUrl,onChange:handleChange,placeholder:\"Image URL\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isEditing?'Update Book':'Add Book'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:resetForm,children:\"Cancel\"})]}),/*#__PURE__*/_jsx(BookList,{books:books,handleEdit:handleEdit,handleDelete:handleDelete})]});};export default ManageBooks;","map":{"version":3,"names":["React","useEffect","useState","axiosConfig","BookList","getAuthHeader","jsx","_jsx","jsxs","_jsxs","ManageBooks","books","setBooks","book","setBook","id","title","author","genre","imageUrl","isEditing","setIsEditing","fetchBooks","config","response","get","data","error","console","handleChange","e","name","value","target","handleAddOrUpdateBook","preventDefault","put","post","resetForm","handleEdit","handleDelete","delete","children","onSubmit","type","onChange","placeholder","required","onClick"],"sources":["/Users/richarddrum/TroyWebTechnicalAssessment/Library/library-frontend/src/components/ManageBooks.tsx"],"sourcesContent":["// src/ManageBooks.tsx\nimport React, { useEffect, useState } from 'react';\nimport axiosConfig from './axiosConfig';\nimport BookList from './BookList';\nimport { Book } from '../types/Book';\nimport { getAuthHeader } from '../utilities/ApiUtils';\n//import { useNavigate } from 'react-router-dom';\n\nconst ManageBooks: React.FC = () => {\n    const [books, setBooks] = useState<Book[]>([]);\n    const [book, setBook] = useState<Book>({ id:-1, title: '', author: '', genre: '', imageUrl: '' });\n    const [isEditing, setIsEditing] = useState(false);\n    //const navigate = useNavigate();\n\n    useEffect(() => {\n        fetchBooks();\n    }, []);\n\n    const fetchBooks = async () => {\n        try {\n            const config = getAuthHeader(); \n            const response = await axiosConfig.get('/api/books/featured', config); // Fetch books from your API\n            setBooks(response.data);\n        } catch (error) {\n            console.error('Error fetching books:', error);\n            // Optionally set an error state here if needed\n        }\n    };\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        setBook({ ...book, [name]: value });\n    };\n\n    const handleAddOrUpdateBook = async (e: React.FormEvent) => {\n        e.preventDefault();\n        try {\n            const config = getAuthHeader(); \n            if (isEditing) {\n                await axiosConfig.put(`/api/books/${book.id}`, book, config); // Update existing book\n            } else {\n                await axiosConfig.post('/api/books', book, config); // Add new book\n            }\n            fetchBooks();\n            resetForm();\n        } catch (error) {\n            console.error('Error saving book:', error);\n        }\n    };\n\n    const handleEdit = (book: Book) => {\n        setBook(book);\n        setIsEditing(true);\n    };\n\n    const handleDelete = async (id: number) => {\n        try {\n            const config = getAuthHeader(); \n            await axiosConfig.delete(`/api/books/${id}`, config); // Delete book by ID\n            fetchBooks();\n        } catch (error) {\n            console.error('Error deleting book:', error);\n        }\n    };\n\n    const resetForm = () => {\n        setBook({ id: -1, title: '', author: '', genre: '', imageUrl: '' });\n        setIsEditing(false);\n    };\n\n    return (\n        <div>\n            <h2>Manage Books</h2>\n            <form onSubmit={handleAddOrUpdateBook}>\n                <input\n                    type=\"text\"\n                    name=\"title\"\n                    value={book.title}\n                    onChange={handleChange}\n                    placeholder=\"Title\"\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"author\"\n                    value={book.author}\n                    onChange={handleChange}\n                    placeholder=\"Author\"\n                    required\n                />\n                <select name=\"genre\" value={book.genre} onChange={handleChange} required>\n                    <option value=\"\">Select Genre</option>\n                    <option value=\"Fiction\">Fiction</option>\n                    <option value=\"Non-Fiction\">Non-Fiction</option>\n                    <option value=\"Sci-Fi\">Sci-Fi</option>\n                    <option value=\"Biography\">Biography</option>\n                </select>\n                <input\n                    type=\"text\"\n                    name=\"imageUrl\"\n                    value={book.imageUrl}\n                    onChange={handleChange}\n                    placeholder=\"Image URL\"\n                    required\n                />\n                <button type=\"submit\">{isEditing ? 'Update Book' : 'Add Book'}</button>\n                <button type=\"button\" onClick={resetForm}>Cancel</button>\n            </form>\n\n            <BookList books={books} handleEdit={handleEdit} handleDelete={handleDelete} />\n        </div>\n    );\n};\n\nexport default ManageBooks;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}