{"ast":null,"code":"// src/ManageBooks.tsx\nimport React,{useEffect,useState}from'react';import axiosConfig from'./axiosConfig';import BookList from'./BookList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";//import { useNavigate } from 'react-router-dom';\nconst ManageBooks=()=>{const[books,setBooks]=useState([]);const[book,setBook]=useState({title:'',author:'',genre:'',imageUrl:''});const[isEditing,setIsEditing]=useState(false);//const navigate = useNavigate();\nuseEffect(()=>{fetchBooks();},[]);const fetchBooks=async()=>{try{// Retrieve the token from localStorage\nconst token=localStorage.getItem('token');// Set up the authorization header\nconst config={headers:{Authorization:`Bearer ${token}`// Include the Bearer token in the headers\n}};const response=await axiosConfig.get('/api/books/featured',config);// Fetch books from your API\nsetBooks(response.data);}catch(error){console.error('Error fetching books:',error);// Optionally set an error state here if needed\n}};const handleChange=e=>{const{name,value}=e.target;setBook({...book,[name]:value});};const handleAddOrUpdateBook=async e=>{e.preventDefault();try{if(isEditing){await axiosConfig.put(`/api/books/${book.id}`,book);// Update existing book\n}else{await axiosConfig.post('/api/books',book);// Add new book\n}fetchBooks();resetForm();}catch(error){console.error('Error saving book:',error);}};const handleEdit=book=>{setBook(book);setIsEditing(true);};const handleDelete=async id=>{try{await axiosConfig.delete(`/api/books/${id}`);// Delete book by ID\nfetchBooks();}catch(error){console.error('Error deleting book:',error);}};const resetForm=()=>{setBook({title:'',author:'',genre:'',imageUrl:''});setIsEditing(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Books\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddOrUpdateBook,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:book.title,onChange:handleChange,placeholder:\"Title\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",value:book.author,onChange:handleChange,placeholder:\"Author\",required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"genre\",value:book.genre,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Genre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fiction\",children:\"Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Non-Fiction\",children:\"Non-Fiction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sci-Fi\",children:\"Sci-Fi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Biography\",children:\"Biography\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"imageUrl\",value:book.imageUrl,onChange:handleChange,placeholder:\"Image URL\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isEditing?'Update Book':'Add Book'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:resetForm,children:\"Cancel\"})]}),/*#__PURE__*/_jsx(BookList,{books:books,handleEdit:handleEdit,handleDelete:handleDelete})]});};export default ManageBooks;","map":{"version":3,"names":["React","useEffect","useState","axiosConfig","BookList","jsx","_jsx","jsxs","_jsxs","ManageBooks","books","setBooks","book","setBook","title","author","genre","imageUrl","isEditing","setIsEditing","fetchBooks","token","localStorage","getItem","config","headers","Authorization","response","get","data","error","console","handleChange","e","name","value","target","handleAddOrUpdateBook","preventDefault","put","id","post","resetForm","handleEdit","handleDelete","delete","children","onSubmit","type","onChange","placeholder","required","onClick"],"sources":["/Users/richarddrum/TroyWebTechnicalAssessment/Library/library-frontend/src/components/ManageBooks.tsx"],"sourcesContent":["// src/ManageBooks.tsx\nimport React, { useEffect, useState } from 'react';\nimport axiosConfig from './axiosConfig';\nimport BookList from './BookList';\nimport { Book } from '../types/book';\n//import { useNavigate } from 'react-router-dom';\n\nconst ManageBooks: React.FC = () => {\n    const [books, setBooks] = useState<Book[]>([]);\n    const [book, setBook] = useState<Book>({ title: '', author: '', genre: '', imageUrl: '' });\n    const [isEditing, setIsEditing] = useState(false);\n    //const navigate = useNavigate();\n\n    useEffect(() => {\n        fetchBooks();\n    }, []);\n\n    const fetchBooks = async () => {\n        try {\n            // Retrieve the token from localStorage\n            const token = localStorage.getItem('token');\n    \n            // Set up the authorization header\n            const config = {\n                headers: {\n                    Authorization: `Bearer ${token}` // Include the Bearer token in the headers\n                }\n            };\n    \n            const response = await axiosConfig.get('/api/books/featured', config); // Fetch books from your API\n            setBooks(response.data);\n        } catch (error) {\n            console.error('Error fetching books:', error);\n            // Optionally set an error state here if needed\n        }\n    };\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        setBook({ ...book, [name]: value });\n    };\n\n    const handleAddOrUpdateBook = async (e: React.FormEvent) => {\n        e.preventDefault();\n        try {\n            if (isEditing) {\n                await axiosConfig.put(`/api/books/${book.id}`, book); // Update existing book\n            } else {\n                await axiosConfig.post('/api/books', book); // Add new book\n            }\n            fetchBooks();\n            resetForm();\n        } catch (error) {\n            console.error('Error saving book:', error);\n        }\n    };\n\n    const handleEdit = (book: Book) => {\n        setBook(book);\n        setIsEditing(true);\n    };\n\n    const handleDelete = async (id: number) => {\n        try {\n            await axiosConfig.delete(`/api/books/${id}`); // Delete book by ID\n            fetchBooks();\n        } catch (error) {\n            console.error('Error deleting book:', error);\n        }\n    };\n\n    const resetForm = () => {\n        setBook({ title: '', author: '', genre: '', imageUrl: '' });\n        setIsEditing(false);\n    };\n\n    return (\n        <div>\n            <h2>Manage Books</h2>\n            <form onSubmit={handleAddOrUpdateBook}>\n                <input\n                    type=\"text\"\n                    name=\"title\"\n                    value={book.title}\n                    onChange={handleChange}\n                    placeholder=\"Title\"\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"author\"\n                    value={book.author}\n                    onChange={handleChange}\n                    placeholder=\"Author\"\n                    required\n                />\n                <select name=\"genre\" value={book.genre} onChange={handleChange} required>\n                    <option value=\"\">Select Genre</option>\n                    <option value=\"Fiction\">Fiction</option>\n                    <option value=\"Non-Fiction\">Non-Fiction</option>\n                    <option value=\"Sci-Fi\">Sci-Fi</option>\n                    <option value=\"Biography\">Biography</option>\n                </select>\n                <input\n                    type=\"text\"\n                    name=\"imageUrl\"\n                    value={book.imageUrl}\n                    onChange={handleChange}\n                    placeholder=\"Image URL\"\n                    required\n                />\n                <button type=\"submit\">{isEditing ? 'Update Book' : 'Add Book'}</button>\n                <button type=\"button\" onClick={resetForm}>Cancel</button>\n            </form>\n\n            <BookList books={books} handleEdit={handleEdit} handleDelete={handleDelete} />\n        </div>\n    );\n};\n\nexport default ManageBooks;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}